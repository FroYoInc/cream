function handleLogin(){var o=[],e=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions
if(e){var i,a=e
for(i in a){var p=a[i]
if("oauth2"===p.type&&p.scopes){oauth2KeyName=i
var n
if(Array.isArray(p.scopes)){var t
for(t=0;t<p.scopes.length;t++)o.push(p.scopes[t])}else for(n in p.scopes)o.push({scope:n,description:p.scopes[n]})}}}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),popupDialog=$(['<div class="api-popup-dialog">','<div class="api-popup-title">Select OAuth2.0 Scopes</div>','<div class="api-popup-content">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>",'<ul class="api-popup-scopes">',"</ul>",'<p class="error-msg"></p>','<div class="api-popup-actions"><button class="api-popup-authbtn api-button green" type="button">Authorize</button><button class="api-popup-cancel api-button gray" type="button">Cancel</button></div>',"</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find("ul.api-popup-scopes").empty(),t=0;t<o.length;t++)n=o[t],str='<li><input type="checkbox" id="scope_'+t+'" scope="'+n.scope+'"/><label for="scope_'+t+'">'+n.scope,n.description&&(str+='<br/><span class="api-scope-desc">'+n.description+"</span>"),str+="</label></li>",popup.append(str)
var r=$(window),s=r.width(),c=r.height(),l=r.scrollTop(),d=popupDialog.outerWidth(),u=popupDialog.outerHeight(),h=(c-u)/2+l,g=(s-d)/2
popupDialog.css({top:(0>h?0:h)+"px",left:(0>g?0:g)+"px"}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),$("button.api-popup-authbtn").unbind(),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide()
var o=window.swaggerUi.api.authSchemes,e=window.location,i=location.pathname.substring(0,location.pathname.lastIndexOf("/")),a=e.protocol+"//"+e.host+i+"/o2c.html",p=window.oAuthRedirectUrl||a,n=null
for(var t in o)if(o.hasOwnProperty(t)){var r=o[t].flow
if("oauth2"!==o[t].type||!r||"implicit"!==r&&"accessCode"!==r){if(o[t].grantTypes){var s=o[t].grantTypes
for(var c in s)if(s.hasOwnProperty(c)&&"implicit"===c){var l=s[c]
l.loginEndpoint.url
n=l.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=l.tokenName}else if(s.hasOwnProperty(c)&&"accessCode"===c){var l=s[c]
l.tokenRequestEndpoint.url
n=l.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=l.tokenName}}}else{var l=o[t]
n=l.authorizationUrl+"?response_type="+("implicit"===r?"token":"code"),window.swaggerUi.tokenName=l.tokenName||"access_token",window.swaggerUi.tokenUrl="accessCode"===r?l.tokenUrl:null}}var d=[],s=$(".api-popup-scopes").find("input:checked")
for(k=0;k<s.length;k++){var u=$(s[k]).attr("scope");-1===d.indexOf(u)&&d.push(u)}var h=Math.random()
window.enabledScopes=d,redirect_uri=p,n+="&redirect_uri="+encodeURIComponent(p),n+="&realm="+encodeURIComponent(realm),n+="&client_id="+encodeURIComponent(clientId),n+="&scope="+encodeURIComponent(d.join(" ")),n+="&state="+encodeURIComponent(h),window.open(n)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.authorizations.authz)window.authorizations.remove(key)
window.enabledScopes=null,$(".api-ic.ic-on").addClass("ic-off"),$(".api-ic.ic-on").removeClass("ic-on"),$(".api-ic.ic-warning").addClass("ic-error"),$(".api-ic.ic-warning").removeClass("ic-warning")}function initOAuth(o){var e=o||{},i=[]
return appName=e.appName||i.push("missing appName"),popupMask=e.popupMask||$("#api-common-mask"),popupDialog=e.popupDialog||$(".api-popup-dialog"),clientId=e.clientId||i.push("missing client id"),realm=e.realm||i.push("missing realm"),i.length>0?void log("auth unable initialize oauth: "+i):($("pre code").each(function(o,e){hljs.highlightBlock(e)}),$(".api-ic").unbind(),void $(".api-ic").click(function(o){$(o.target).hasClass("ic-off")?handleLogin():handleLogout()}))}var appName,popupMask,popupDialog,clientId,realm,oauth2KeyName,redirect_uri
window.processOAuthCode=function(o){var e={client_id:clientId,code:o.code,grant_type:"authorization_code",redirect_uri:redirect_uri}
$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:e,success:function(o,e,i){onOAuthComplete(o)},error:function(o,e,i){onOAuthComplete("")}})},window.onOAuthComplete=function(o){if(o)if(o.error){var e=$("input[type=checkbox],.secured")
e.each(function(o){e[o].checked=!1}),alert(o.error)}else{var i=o[window.swaggerUi.tokenName]
if(i){var a=null
$.each($(".auth #api_information_panel"),function(o,e){var i=e
if(i&&i.childNodes){var p=[]
$.each(i.childNodes,function(o,e){var i=e.innerHTML
i&&p.push(i)})
for(var n=[],t=0;t<p.length;t++){var r=p[t]
window.enabledScopes&&-1==window.enabledScopes.indexOf(r)&&n.push(r)}n.length>0?(a=e.parentNode,$(a.parentNode).find(".api-ic.ic-on").addClass("ic-off"),$(a.parentNode).find(".api-ic.ic-on").removeClass("ic-on"),$(a).find(".api-ic").addClass("ic-warning"),$(a).find(".api-ic").removeClass("ic-error")):(a=e.parentNode,$(a.parentNode).find(".api-ic.ic-off").addClass("ic-on"),$(a.parentNode).find(".api-ic.ic-off").removeClass("ic-off"),$(a).find(".api-ic").addClass("ic-info"),$(a).find(".api-ic").removeClass("ic-warning"),$(a).find(".api-ic").removeClass("ic-error"))}}),window.swaggerUi.api.clientAuthorizations.add(oauth2KeyName,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+i,"header"))}}}
